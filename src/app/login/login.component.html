<div class="login-container">
  <!-- Left illustration area -->
  <div class="login-illustration">
    <div class="brand-logo">
      <img src="assets/logo1.png" alt="logo" />
      <!-- <span>ghostlamp</span> -->
    </div>
    <img src="assets/truck iage.webp" alt="illustration" />
  </div>

  <!-- Right login form area -->
  <div class="login-card">
    <div class="login-form-container">
      <h2>Hello Welcome Back :)</h2>
      <p class="subtitle">
        To keep connected with us, please login with your email and password.
      </p>

  <form *ngIf="!showOtp" (ngSubmit)="onSubmit()" #loginForm="ngForm">
        <div class="form-group">
          <label for="email">Email Address</label>
          <input
            type="email"
            id="email"
            name="email"
            [(ngModel)]="loginData.email"
            required
            email
            placeholder="justin@ghostlamp.io"
            #email="ngModel"
          />
          <div class="error-message" *ngIf="email.invalid && email.touched">
            <small *ngIf="email.errors?.required">Email is required</small>
            <small *ngIf="email.errors?.email">Please enter a valid email</small>
          </div>
        </div>

        <div class="form-group">
          <label for="password">Password</label>
          <input
            type="password"
            id="password"
            name="password"
            [(ngModel)]="loginData.password"
            required
            minlength="6"
            placeholder="Enter your password"
            #password="ngModel"
          />
          <div class="error-message" *ngIf="password.invalid && password.touched">
            <small *ngIf="password.errors?.required">Password is required</small>
            <small *ngIf="password.errors?.minlength">
              Password must be at least 6 characters
            </small>
          </div>
        </div>

        <div class="options">
          <label>
            <input type="checkbox" [(ngModel)]="loginData.rememberMe" name="rememberMe" />
            Remember Me
          </label>
          <a href="#" class="forgot-password">Forgot Password?</a>
        </div>

        <button type="submit" [disabled]="loginForm.invalid" class="login-btn">
          {{ isLoading ? 'Signing in...' : 'Login Now' }}
        </button>

        <div class="divider">
          <span>or you can join with</span>
        </div>

        <div class="social-login">
          <button type="button" class="google" title="Continue with Google">
            <i class="fab fa-google"></i>
          </button>
          <button type="button" class="facebook" title="Continue with Facebook">
            <i class="fab fa-facebook-f"></i>
          </button>
          <button type="button" class="twitter" title="Continue with Twitter">
            <i class="fab fa-twitter"></i>
          </button>
        </div>
      </form>

      <!-- OTP verification view -->
      <div *ngIf="showOtp" class="otp-container">
        <h3>Enter OTP</h3>
        <p>An OTP has been sent to your email: <strong>{{ loginData.email }}</strong></p>

        <div class="form-group">
          <label for="otp">One-Time Password (OTP)</label>
          <input id="otp" name="otp" type="text" maxlength="6" [(ngModel)]="otpInput" />
        </div>

        <div class="otp-actions">
          <button type="button" class="login-btn" (click)="verifyOtp()" [disabled]="isLoading">
            {{ isLoading ? 'Verifying...' : 'Verify OTP' }}
          </button>
          <button type="button" class="secondary" (click)="resendOtp()" [disabled]="isLoading">Resend OTP</button>
        </div>

        <div class="error-message" *ngIf="otpError">
          <small>{{ otpError }}</small>
        </div>

        <div class="cancel-otp">
          <a href="#" (click)="resetOtpFlow(); $event.preventDefault()">Cancel and login again</a>
        </div>
      </div>

      <div class="signup-text">
        Don't have an account? <a href="#" (click)="navigateToSignup(); $event.preventDefault()">Create Account</a>
      </div>
    </div>
  </div>
</div>
